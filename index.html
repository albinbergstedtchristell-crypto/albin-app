<!DOCTYPE html>
<html lang="sv">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Reaktionsspel</title>

<style>
* {
    box-sizing: border-box;
}

body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #111;
    color: white;
    text-align: center;
    overflow: hidden;
}

h1 {
    margin: 15px 0;
    font-size: 1.8rem;
}

#gameArea {
    height: 65vh;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    font-weight: bold;
    cursor: pointer;
    transition: background 0.15s;
    border-radius: 20px;
    margin: 10px;
}

.red {
    background: #ff3b3b;
}

.green {
    background: #00c853;
}

button {
    padding: 14px 25px;
    font-size: 1.1rem;
    border: none;
    border-radius: 12px;
    margin: 10px;
    background: #2196f3;
    color: white;
}

button:active {
    transform: scale(0.95);
}

input {
    padding: 12px;
    font-size: 1rem;
    border-radius: 10px;
    border: none;
    margin-top: 10px;
    width: 80%;
    max-width: 250px;
}

#result {
    font-size: 1.4rem;
    margin-top: 10px;
}

ul {
    list-style: none;
    padding: 0;
}

li {
    background: #222;
    margin: 5px auto;
    padding: 8px;
    border-radius: 8px;
    width: 80%;
    max-width: 300px;
    font-size: 1rem;
}

/* Extra mobiloptimering */
@media (max-width: 500px) {
    #gameArea {
        font-size: 1.6rem;
    }

    h1 {
        font-size: 1.5rem;
    }
}
</style>
</head>

<body>

<h1>üß† Reaktionsspel</h1>

<div id="gameArea" class="red">
    Tryck p√• Start
</div>

<button onclick="startGame()">Start</button>

<h2 id="result"></h2>

<div>
    <h3>üèÜ Highscore</h3>
    <input type="text" id="playerName" placeholder="Ditt namn">
    <br>
    <button onclick="saveScore()">Spara resultat</button>
    <ul id="scoreList"></ul>
</div>

<script>
let startTime;
let timeout;
let canClick = false;
let lastReaction = null;

function startGame() {
    const gameArea = document.getElementById("gameArea");
    const result = document.getElementById("result");

    result.textContent = "";
    gameArea.className = "red";
    gameArea.textContent = "V√§nta...";

    canClick = false;

    const randomTime = Math.random() * 3000 + 2000;

    timeout = setTimeout(() => {
        gameArea.className = "green";
        gameArea.textContent = "TRYCK NU!";
        startTime = Date.now();
        canClick = true;
    }, randomTime);
}

document.getElementById("gameArea").addEventListener("touchstart", handleClick);
document.getElementById("gameArea").addEventListener("click", handleClick);

function handleClick() {
    if (!canClick) {
        clearTimeout(timeout);
        this.textContent = "F√∂r tidigt! üòÖ";
        return;
    }

    const reactionTime = Date.now() - startTime;
    lastReaction = reactionTime;

    document.getElementById("result").textContent =
        "Din reaktionstid: " + reactionTime + " ms";

    this.textContent = "Tryck Start f√∂r att spela igen";
    this.className = "red";
    canClick = false;
}

function saveScore() {
    if (lastReaction === null) {
        alert("Spela f√∂rst!");
        return;
    }

    const name = document.getElementById("playerName").value;
    if (name === "") {
        alert("Skriv ditt namn!");
        return;
    }

    let scores = JSON.parse(localStorage.getItem("scores")) || [];
    scores.push({ name: name, time: lastReaction });

    scores.sort((a, b) => a.time - b.time);

    localStorage.setItem("scores", JSON.stringify(scores));
    displayScores();
}

function displayScores() {
    const scoreList = document.getElementById("scoreList");
    scoreList.innerHTML = "";

    let scores = JSON.parse(localStorage.getItem("scores")) || [];

    scores.slice(0, 5).forEach(score => {
        const li = document.createElement("li");
        li.textContent = score.name + " - " + score.time + " ms";
        scoreList.appendChild(li);
    });
}

displayScores();
</script>

</body>
</html>